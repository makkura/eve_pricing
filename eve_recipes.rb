# Recipes
materials = [
	{ :name => :tritanium, :id => "34" },
	{ :name => :pyerite, :id => "35" },
	{ :name => :mexallon, :id => "36" },
	{ :name => :isogen, :id => "37" },
	{ :name => :nocxium, :id => "38" },
	{ :name => :zydrine, :id => "39" },
	{ :name => :megacyte, :id => "40" },
	{ :name => :morphite, :id => "11399"}
]

recipes = [
	{:name => "Antimatter Charge M", :id => 230, :quantity => 100, :tritanium => 405, :pyerite => 376, :mexallon => 7, :isogen => 0, :nocxium => 0, :zydrine => 0, :megacyte => 0, :morphite => 0},
	{:name => "Antimatter Charge S", :id => 222, :quantity => 100, :tritanium => 184, :pyerite => 16, :mexallon => 0, :isogen => 0, :nocxium => 1, :zydrine => 0, :megacyte => 0, :morphite => 0},
	{:name => "Carbonized Lead M", :id => 186, :tritanium => 164, :pyerite => 17, :mexallon => 0, :isogen => 3, :nocxium => 0, :zydrine => 0, :megacyte => 0, :morphite => 0},
	{:name => "EMP M", :id => 193, :tritanium => 449, :pyerite => 417, :mexallon => 7, :isogen => 0, :nocxium => 0, :zydrine => 0, :megacyte => 0, :morphite => 0},
	{:name => "Fusion M", :id => 191, :tritanium => 239, :pyerite => 318, :mexallon => 1, :isogen => 0, :nocxium => 0, :zydrine => 0, :megacyte => 0, :morphite => 0},
	{:name => "Inferno Cruise Missile", :id => 204, :tritanium => 1842, :pyerite => 707, :mexallon => 0, :isogen => 0, :nocxium => 0, :zydrine => 2, :megacyte => 0, :morphite => 0},
	{:name => "Inferno Heavy Assault Missile", :id => 20308, :tritanium => 716, :pyerite => 2, :mexallon => 6, :isogen => 0, :nocxium => 3, :zydrine => 0, :megacyte => 0, :morphite => 0},
	{:name => "Inferno Heavy Missile", :id => 208, :tritanium => 716, :pyerite => 2, :mexallon => 6, :isogen => 0, :nocxium => 3, :zydrine => 0, :megacyte => 0, :morphite => 0},
	{:name => "Inferno Light Missile", :id => 211, :tritanium => 58, :pyerite => 72, :mexallon => 0, :isogen => 0, :nocxium => 0, :zydrine => 0, :megacyte => 0, :morphite => 0},
	{:name => "Lead Charge M", :id => 226, :tritanium => 412, :pyerite => 2, :mexallon => 3, :isogen => 3, :nocxium => 1, :zydrine => 0, :megacyte => 0, :morphite => 0},
	{:name => "Lead Charge S", :id => 218, :tritanium => 107, :pyerite => 0, :mexallon => 1, :isogen => 2, :nocxium => 0, :zydrine => 0, :megacyte => 0, :morphite => 0},
	{:name => "Microwave S", :id => 240, :tritanium => 4, :pyerite => 1, :mexallon => 2, :isogen => 3, :nocxium => 3, :zydrine => 0, :megacyte => 0, :morphite => 0},
	{:name => "Mjolnir Cruise Missile", :id => 202, :tritanium => 3084, :pyerite => 472, :mexallon => 68, :isogen => 0, :nocxium => 0, :zydrine => 2, :megacyte => 0, :morphite => 0},
	{:name => "Mjolnir Heavy Assault Missile", :id => 20306, :tritanium => 496, :pyerite => 220, :mexallon => 0, :isogen => 0, :nocxium => 2, :zydrine => 0, :megacyte => 0, :morphite => 0},
	{:name => "Mjolnir Heavy Missile", :id => 207, :tritanium => 496, :pyerite => 220, :mexallon => 0, :isogen => 0, :nocxium => 2, :zydrine => 0, :megacyte => 0, :morphite => 0},
	{:name => "Nova Cruise Missile", :id => 205, :tritanium => 1447, :pyerite => 0, :mexallon => 81, :isogen => 4, :nocxium => 0, :zydrine => 1, :megacyte => 0, :morphite => 0},
	{:name => "Nova Heavy Assault Missile", :id => 21867, :tritanium => 351, :pyerite => 119, :mexallon => 0, :isogen => 0, :nocxium => 1, :zydrine => 0, :megacyte => 0, :morphite => 0},
	{:name => "Nuclear S", :id => 179, :tritanium => 38, :pyerite => 32, :mexallon => 0, :isogen => 0, :nocxium => 0, :zydrine => 0, :megacyte => 0, :morphite => 0},
	{:name => "Phased Plasma M", :id => 192, :tritanium => 668, :pyerite => 36, :mexallon => 4, :isogen => 14, :nocxium => 0, :zydrine => 0, :megacyte => 0, :morphite => 0},
	{:name => "Radio L", :id => 255, :tritanium => 13, :pyerite => 6, :mexallon => 6, :isogen => 47, :nocxium => 17, :zydrine => 9, :megacyte => 37, :morphite => 0},
	{:name => "Radio M", :id => 247, :tritanium => 27, :pyerite => 0, :mexallon => 13, :isogen => 3, :nocxium => 19, :zydrine => 2, :megacyte => 2, :morphite => 0},
	{:name => "Scourge Cruise Missile", :id => 203, :tritanium => 1867, :pyerite => 144, :mexallon => 17, :isogen => 0, :nocxium => 2, :zydrine => 2, :megacyte => 0, :morphite => 0},
	{:name => "Scourge Heavy Assault Missile", :id => 20307, :tritanium => 738, :pyerite => 2, :mexallon => 0, :isogen => 0, :nocxium => 2, :zydrine => 0, :megacyte => 0, :morphite => 0},
	{:name => "Scourge Heavy Missile", :id => 209, :tritanium => 738, :pyerite => 0, :mexallon => 0, :isogen => 0, :nocxium => 2, :zydrine => 0, :megacyte => 0, :morphite => 0},
	{:name => "Scourge Light Missile", :id => 210, :tritanium => 69, :pyerite => 43, :mexallon => 2, :isogen => 0, :nocxium => 0, :zydrine => 0, :megacyte => 0, :morphite => 0},
	{:name => "Standard L", :id => 258, :tritanium => 0, :pyerite => 57, :mexallon => 54, :isogen => 3, :nocxium => 3, :zydrine => 3, :megacyte => 16, :morphite => 0},
	{:name => "Standard M", :id => 250, :tritanium => 0, :pyerite => 4, :mexallon => 33, :isogen => 27, :nocxium => 0, :zydrine => 0, :megacyte => 1, :morphite => 0},
	{:name => "Xray L", :id => 260, :tritanium => 0, :pyerite => 2, :mexallon => 67, :isogen => 22, :nocxium => 4, :zydrine => 17, :megacyte => 29, :morphite => 0},
	{:name => "Xray M", :id => 252, :tritanium => 40, :pyerite => 0, :mexallon => 12, :isogen => 0, :nocxium => 18, :zydrine => 0, :megacyte => 2, :morphite => 0},
	{:name => "Xray S", :id => 244, :tritanium => 2, :pyerite => 0, :mexallon => 11, :isogen => 1, :nocxium => 0, :zydrine => 1, :megacyte => 0, :morphite => 0},
	{:name => "Acolyte I", :id => 2203, :tritanium => 471, :pyerite => 0, :mexallon => 4, :isogen => 0, :nocxium => 2, :zydrine => 0, :megacyte => 0, :morphite => 0},
	{:name => "Hammerhead I", :id => 2183, :tritanium => 3413, :pyerite => 2, :mexallon => 224, :isogen => 11, :nocxium => 0, :zydrine => 2, :megacyte => 0, :morphite => 0},
	{:name => "Hobgoblin I", :id => 2454, :tritanium => 509, :pyerite => 7, :mexallon => 0, :isogen => 4, :nocxium => 2, :zydrine => 0, :megacyte => 0, :morphite => 0},
	{:name => "Hornet I", :id => 2464, :tritanium => 538, :pyerite => 69, :mexallon => 0, :isogen => 4, :nocxium => 2, :zydrine => 0, :megacyte => 0, :morphite => 0},
	{:name => "Warrior", :id => 2486, :tritanium => 951, :pyerite => 7, :mexallon => 7, :isogen => 0, :nocxium => 4, :zydrine => 0, :megacyte => 0, :morphite => 0},
	{:name => "Cap Booster 50", :id => 264, :tritanium => 500, :pyerite => 40, :mexallon => 19, :isogen => 7, :nocxium => 0, :zydrine => 0, :megacyte => 0, :morphite => 0},
	{:name => "Giant Secure Container", :id => 11489, :tritanium => 35556, :pyerite => 0, :mexallon => 7, :isogen => 0, :nocxium => 0, :zydrine => 36, :megacyte => 0, :morphite => 0},
	{:name => "Station Container", :id => 17366, :tritanium => 556, :pyerite => 556, :mexallon => 167, :isogen => 0, :nocxium => 0, :zydrine => 0, :megacyte => 0, :morphite => 0}
]

recipes.each do |recipe|
	# Find the item the recipe is for, if it's not there then make one
	item = Item.find_by_typeid(recipe[:id].to_s) || Item.create( :typeid => recipe[:id].to_s, :name => recipe[:name])
	
	# Check the item craft quantity to confirm it matches the new value
	recipe[:quantity] ||= 1
	if( item.quantity != recipe[:quantity] )
		item.quantity = recipe[:quantity]
		item.save
	end

	materials.each do |mat|
		material = Material.find_by_typeid(mat[:id])
		quantity = recipe[mat[:name]] rescue nil || 0
		rec = Recipe.find_by_item_id_and_material_id(item.id, material.id)
		if rec
			rec.quantity = quantity unless rec.quantity = quantity
			rec.save
		else
			item.recipe.push Recipe.create( :item_id => item.id, :material_id => material.id, :quantity => quantity)
		end
	end
end
