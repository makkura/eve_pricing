/*!
* jQuery appendGrid v1.4.0
* https://appendgrid.apphb.com/
*
* Copyright 2014 Albert L.
* Dual licensed under the LGPL (http://www.gnu.org/licenses/lgpl.html)
* and MIT (http://www.opensource.org/licenses/mit-license.php) licenses.
*
* Depends:
* jQuery v1.9.1+
* jquery UI v1.10.2+
*/
(function(g){var r={caption:null,initRows:3,initData:null,columns:null,i18n:null,idPrefix:null,rowDragging:false,hideButtons:null,hideRowNumColumn:false,rowButtonsInFront:false,buttonClasses:null,customGridButtons:null,customRowButtons:null,customFooterButtons:null,dataLoaded:null,afterRowAppended:null,afterRowInserted:null,afterRowSwapped:null,beforeRowRemove:null,afterRowRemoved:null};var w={type:"text",name:null,value:null,display:null,displayCss:null,headerSpan:1,cellCss:null,ctrlAttr:null,ctrlProp:null,ctrlCss:null,ctrlClass:null,ctrlOptions:null,uiOption:null,uiTooltip:null,resizable:false,invisible:false,customBuilder:null,customGetter:null,customSetter:null,onClick:null,onChange:null};var s={noColumnInfo:"Cannot initial grid without column information!",elemNotTable:"Cannot initial grid on element other than TABLE!",notInit:"`appendGrid` does not initialized",getValueMultiGrid:"Cannot get values on multiple grid",notSupportMethod:"Method is not supported by `appendGrid`: "};var u={append:"Append Row",removeLast:"Remove Last Row",insert:"Insert Row Above",remove:"Remove Current Row",moveUp:"Move Up",moveDown:"Move Down",rowDrag:"Sort Row",rowEmpty:"This Grid Is Empty"};var l={append:null,removeLast:null,insert:null,remove:null,moveUp:null,moveDown:null,rowDrag:null};var f={append:false,removeLast:false,insert:false,remove:false,moveUp:false,moveDown:false};var k={init:function(E){var S=this;if(S.length>0){if(!g.isArray(E.columns)||E.columns.length==0){alert(s.noColumnInfo);return S}var N=S[0],F,J,R,P,B;if(n(N.tagName)||N.tagName!="TABLE"){alert(s.elemNotTable);return S}var Q=g.extend({},r,E);g.extend(Q,{_uniqueIndex:0,_rowOrder:[],_isDataLoaded:false,_visibleCount:0,_finalColSpan:0,_hideLastColumn:false});if(g.isPlainObject(E.i18n)){Q._i18n=g.extend({},u,E.i18n)}else{Q._i18n=g.extend({},u)}if(g.isPlainObject(E.buttonClasses)){Q._buttonClasses=g.extend({},l,E.buttonClasses)}else{Q._buttonClasses=g.extend({},l)}if(g.isPlainObject(E.hideButtons)){Q.hideButtons=g.extend({},f,E.hideButtons)}else{Q.hideButtons=g.extend({},f)}if(n(Q.idPrefix)){if(n(N.id)||N.id==""){Q.idPrefix="ag"+new Date().getTime()}else{Q.idPrefix=N.id}}if(!g.isPlainObject(Q.customGridButtons)){Q.customGridButtons={}}F=document.createElement("thead");F.className="ui-widget-header";J=document.createElement("tbody");J.className="ui-widget-content";R=document.createElement("tfoot");R.className="ui-widget-header";g(N).empty().addClass("appendGrid ui-widget").append(F,J,R);var C,M;P=F.insertRow(-1);if(!Q.hideRowNumColumn){C=P.insertCell(-1);C.className="ui-widget-header"}var G=0;for(var H=0;H<Q.columns.length;H++){var L=g.extend({},w,Q.columns[H]);Q.columns[H]=L;if(Q.columns[H].type!="hidden"){if(!Q.columns[H].invisible){Q._visibleCount++}if(G==0){var D="ui-widget-header";if(Q.columns[H].invisible){D+=" invisible"}if(Q.columns[H].resizable){D+=" resizable"}B=P.insertCell(-1);B.id=Q.idPrefix+"_"+Q.columns[H].name+"_td_head";B.className=D;g(B).text(Q.columns[H].display);if(Q.columns[H].displayCss){g(B).css(Q.columns[H].displayCss)}if(Q.columns[H].headerSpan>1){g(B).attr("colSpan",Q.columns[H].headerSpan);G=Q.columns[H].headerSpan-1}}else{G--}}}g("td.resizable",F).resizable({handles:"e"});if(Q.hideButtons.insert&&Q.hideButtons.remove&&Q.hideButtons.moveUp&&Q.hideButtons.moveDown&&(!g.isArray(Q.customRowButtons)||Q.customRowButtons.length==0)){Q._hideLastColumn=true}Q._finalColSpan=Q._visibleCount;if(!Q.hideRowNumColumn){Q._finalColSpan++}if(!Q._hideLastColumn){Q._finalColSpan++}if(!Q._hideLastColumn){if(Q.rowButtonsInFront){if(Q.hideRowNumColumn){M=P.insertCell(0)}else{C.colSpan=2;M=C}}else{M=P.insertCell(-1)}M.className="ui-widget-header"}if(Q.caption){P=F.insertRow(0);B=P.insertCell(-1);B.id=Q.idPrefix+"_caption_td";B.className="ui-state-active caption";B.colSpan=Q._finalColSpan;g(B).text(Q.caption)}P=R.insertRow(-1);B=P.insertCell(-1);B.id=Q.idPrefix+"_footer_td";B.colSpan=Q._finalColSpan;g("<input/>").attr({type:"hidden",id:Q.idPrefix+"_rowOrder",name:Q.idPrefix+"_rowOrder"}).appendTo(B);if(Q.hideButtons.append&&Q.hideButtons.removeLast&&(!g.isArray(Q.customFooterButtons)||Q.customFooterButtons.length==0)){P.style.display="none"}else{if(!Q.hideButtons.append){m(Q.customGridButtons.append,"ui-icon-plusthick").attr({title:Q._i18n.append}).addClass("append",Q._buttonClasses.append).click(function(T){d(N,1,null,null);if(T&&T.preventDefault){T.preventDefault()}return false}).appendTo(B)}if(!Q.hideButtons.removeLast){m(Q.customGridButtons.removeLast,"ui-icon-closethick").attr({title:Q._i18n.removeLast}).addClass("removeLast",Q._buttonClasses.removeLast).click(function(T){j(N,null,this.value,false);if(T&&T.preventDefault){T.preventDefault()}return false}).appendTo(B)}if(Q.customFooterButtons&&Q.customFooterButtons.length){for(var K=Q.customFooterButtons.length-1;K>=0;K--){var O=Q.customFooterButtons[K];if(O&&O.uiButton&&O.click&&O.atTheFront){g(B).prepend(q(N,O))}}for(var K=0;K<Q.customFooterButtons.length;K++){var O=Q.customFooterButtons[K];if(O&&O.uiButton&&O.click&&!O.atTheFront){g(B).append(q(N,O))}}}}if(Q.rowDragging){g(J).sortable({axis:"y",containment:N,handle:".rowDrag",helper:function(V,U){var W=U.children();var T=U.clone();T.children().each(function(Y){g(this).width(W.eq(Y).width());var X=g("select",this);if(X.length>0){for(var aa=0;aa<X.length;aa++){var Z=W.eq(Y).find("select");if(Z.length>aa){X[aa].value=Z[aa].value}}}});return T},update:function(V,W){var T=W.item[0].id.substring(W.item[0].id.lastIndexOf("_")+1);var U=W.item[0].rowIndex-g("tr",F).length;p(N,W.originalPosition.top>W.position.top,T,U)}})}g(N).data("appendGrid",Q);if(g.isArray(E.initData)){a(N,E.initData,true)}else{g(N).appendGrid("appendRow",Q.initRows)}if(Q._rowOrder.length==0){var I=g("<td></td>").text(Q._i18n.rowEmpty).attr("colspan",Q._finalColSpan);g("tbody",N).append(g("<tr></tr>").addClass("empty").append(I))}}return S},isReady:function(){var B=e(this,true);if(B){return true}return false},isDataLoaded:function(){var B=e(this);if(B){return B._isDataLoaded}return false},load:function(B){var C=e(this),D=this;if(C){if(B!=null&&B.length>0){a(D[0],B,false)}else{y(D[0])}}return D},appendRow:function(B){return this.appendGrid("insertRow",B)},insertRow:function(E,G,C){var F=e(this);if(F){if((g.isArray(E)&&E.length>0)||(g.isNumeric(E)&&E>0)){var B=this[0];insertResult=d(B,E,G,C);if(g.isNumeric(G)||g.isNumeric(C)){t(B,insertResult.rowIndex);var D=F._rowOrder[insertResult.addedRows[0]];g("#"+F.idPrefix+"_Insert_"+D,B).focus()}}}return this},removeRow:function(D,B){var C=e(this);if(C&&C._rowOrder.length>0){j(this[0],D,B,true)}return this},emptyGrid:function(){var B=e(this);if(B){y(this[0])}return target},moveUpRow:function(H,G){var C=e(this),F=this;if(C){var E=F[0],J,B,D,I=null;var K=E.getElementsByTagName("tbody")[0];if(g.isNumeric(H)&&H>0&&H<C._rowOrder.length){I=H;G=C._rowOrder[H];J=document.getElementById(C.idPrefix+"_Row_"+G,E)}else{if(g.isNumeric(G)){I=h(G,C);J=document.getElementById(C.idPrefix+"_Row_"+G,E)}}if(I!=null&&I>0){B=document.getElementById(C.idPrefix+"_Row_"+C._rowOrder[I-1],E);K.removeChild(J);K.insertBefore(J,B);C._rowOrder[I]=C._rowOrder[I-1];C._rowOrder[I-1]=G;D=g("td.first",B).html();g("td.first",B).html(g("td.first",J).html());g("td.first",J).html(D);b(E,C);g("td.last button.moveUp",J).removeClass("ui-state-hover").blur();g("td.last button.moveUp",B).focus();if(C.afterRowSwapped){C.afterRowSwapped(E,I,I-1)}}}return F},moveDownRow:function(H,G){var C=e(this),F=this;if(C){var E=F[0],J,B,D,I=null;var K=E.getElementsByTagName("tbody")[0];if(g.isNumeric(H)&&H>=0&&H<C._rowOrder.length-1){I=H;G=C._rowOrder[H];J=document.getElementById(C.idPrefix+"_Row_"+G,E)}else{if(g.isNumeric(G)){I=h(G,C);J=document.getElementById(C.idPrefix+"_Row_"+G,E)}}if(I!=null&&I!=C._rowOrder.length-1){B=document.getElementById(C.idPrefix+"_Row_"+C._rowOrder[I+1],E);K.removeChild(B);K.insertBefore(B,J);C._rowOrder[I]=C._rowOrder[I+1];C._rowOrder[I+1]=G;D=g("td.first",B).html();g("td.first",B).html(g("td.first",J).html());g("td.first",J).html(D);b(E,C);g("td.last button.moveDown",J).removeClass("ui-state-hover").blur();g("td.last button.moveDown",B).focus();if(C.afterRowSwapped){C.afterRowSwapped(E,I,I+1)}}}return F},showColumn:function(E){var F=e(this);if(F&&E){var D=-1,C=this[0];for(var G=0;G<F.columns.length;G++){if(F.columns[G].name==E){D=G;break}}if(D!=-1&&F.columns[D].invisible){F._visibleCount++;F._finalColSpan++;g("#"+F.idPrefix+"_caption_td").attr("colSpan",F._finalColSpan);g("#"+F.idPrefix+"_footer_td").attr("colSpan",F._finalColSpan);g("#"+F.idPrefix+"_"+E+"_td_head").removeClass("invisible");for(var G=0;G<F._rowOrder.length;G++){var B=F._rowOrder[G];g("#"+F.idPrefix+"_"+E+"_td_"+B).removeClass("invisible")}F.columns[D].invisible=false;b(C,F)}}return this},hideColumn:function(E){var F=e(this);if(F&&E){var D=-1,C=this[0];for(var G=0;G<F.columns.length;G++){if(F.columns[G].name==E){D=G;break}}if(D!=-1&&!F.columns[D].invisible){F._visibleCount--;F._finalColSpan--;g("#"+F.idPrefix+"_caption_td").attr("colSpan",F._finalColSpan);g("#"+F.idPrefix+"_footer_td").attr("colSpan",F._finalColSpan);g("#"+F.idPrefix+"_"+E+"_td_head").addClass("invisible");for(var G=0;G<F._rowOrder.length;G++){var B=F._rowOrder[G];g("#"+F.idPrefix+"_"+E+"_td_"+B).addClass("invisible")}F.columns[D].invisible=true;b(C,F)}}return this},isColumnInvisible:function(B){var C=e(this);if(C&&B){for(var D=0;D<C.columns.length;D++){if(C.columns[D].name==B){return C.columns[D].invisible}}}return null},getRowCount:function(){var B=e(this);if(B){return B._rowOrder.length}return null},getUniqueIndex:function(C){var B=e(this);if(B&&g.isNumeric(C)&&C<B._rowOrder.length){return B._rowOrder[C]}return null},getRowIndex:function(B){var C=e(this);if(C&&g.isNumeric(B)){for(var D=0;D<C._rowOrder.length;D++){if(C._rowOrder[D]==B){return D}}}return null},getRowValue:function(F,C,E){var D=e(this),B=null;if(D){if(g.isNumeric(F)&&F>=0&&F<D._rowOrder.length){C=D._rowOrder[F]}if(!n(C)){B=i(D,C,E)}}return B},getAllValue:function(D){var C=e(this),B=null;if(C){B=D?{}:[];for(var E=0;E<C._rowOrder.length;E++){if(D){rowValue=i(C,C._rowOrder[E],E);g.extend(B,rowValue)}else{rowValue=i(C,C._rowOrder[E]);B.push(rowValue)}}if(D){B._RowCount=C._rowOrder.length}}return B},getCtrlValue:function(B,E){var C=e(this);if(C&&E>=0&&E<C._rowOrder.length){for(var D=0;D<C.columns.length;D++){if(C.columns[D].name===B){return c(C,D,C._rowOrder[E])}}}return null},setCtrlValue:function(B,F,D){var C=e(this);if(C&&F>=0&&F<C._rowOrder.length){for(var E=0;E<C.columns.length;E++){if(C.columns[E].name==B){o(C,E,C._rowOrder[F],D);break}}}return this},getCellCtrl:function(C,F){var D=e(this);if(D&&F>=0&&F<D._rowOrder.length){var B=D._rowOrder[F];for(var E=0;E<D.columns.length;E++){if(D.columns[E].name===C){return v(D.columns[E].type,D.idPrefix,C,B)}}}return null},getCellCtrlByUniqueIndex:function(C,B){var D=e(this);if(D){for(var E=0;E<D.columns.length;E++){if(D.columns[E].name===C){return v(D.columns[E].type,D.idPrefix,C,B)}}}return null},getRowOrder:function(){var B=e(this);if(B){return B._rowOrder.slice()}return null},getColumns:function(){var B=e(this);if(B){return B.columns.slice()}return null}};function e(C,B){var D=null;if(C.length==1){D=C.data("appendGrid");if(!D&&!B){alert(s.notInit)}}else{if(!B){alert(s.getValueMultiGrid)}}return D}function d(Q,I,P,M){var V=g(Q).data("appendGrid");var U=[],D=null,E,N,S=[];var F=Q.getElementsByTagName("thead")[0];var K=Q.getElementsByTagName("tbody")[0];var H=I,B=false;if(g.isArray(I)){H=I.length;B=true}if(g.isNumeric(M)){for(var J=0;J<V._rowOrder.length;J++){if(V._rowOrder[J]==M){P=J;if(J!=0){D=J-1}break}}}else{if(g.isNumeric(P)){if(P>=V._rowOrder.length){P=null}else{D=P-1}}else{if(V._rowOrder.length!=0){P=null;D=V._rowOrder.length-1}}}if(V._rowOrder.length==0){g("tr.empty",Q).remove()}for(var J=0;J<H;J++){V._uniqueIndex++;E=V._uniqueIndex;S.length=0;if(g.isNumeric(P)){V._rowOrder.splice(P,0,E);tbRow=K.insertRow(P);U.push(P)}else{V._rowOrder.push(E);tbRow=K.insertRow(-1);U.push(V._rowOrder.length-1)}tbRow.id=V.idPrefix+"_Row_"+E;g(tbRow).data("appendGrid",E);if(!V.hideRowNumColumn){tbCell=tbRow.insertCell(-1);g(tbCell).addClass("ui-widget-content first").text(V._rowOrder.length)}for(var L=0;L<V.columns.length;L++){if(V.columns[L].type=="hidden"){S.push(L);continue}var C="ui-widget-content";if(V.columns[L].invisible){C+=" invisible"}tbCell=tbRow.insertCell(-1);tbCell.id=V.idPrefix+"_"+V.columns[L].name+"_td_"+E;tbCell.className=C;if(V.columns[L].cellCss!=null){g(tbCell).css(V.columns[L].cellCss)}N=null;if(V.columns[L].type=="custom"){if(typeof(V.columns[L].customBuilder)=="function"){N=V.columns[L].customBuilder(tbCell,V.idPrefix,V.columns[L].name,E)}}else{if(V.columns[L].type=="select"){N=document.createElement("select");N.id=V.idPrefix+"_"+V.columns[L].name+"_"+E;N.name=N.id;if(g.isArray(V.columns[L].ctrlOptions)){if(V.columns[L].ctrlOptions.length>0){if(g.isPlainObject(V.columns[L].ctrlOptions[0])){for(var O=0;O<V.columns[L].ctrlOptions.length;O++){N.options[N.options.length]=new Option(V.columns[L].ctrlOptions[O].label,V.columns[L].ctrlOptions[O].value)}}else{for(var O=0;O<V.columns[L].ctrlOptions.length;O++){N.options[N.options.length]=new Option(V.columns[L].ctrlOptions[O],V.columns[L].ctrlOptions[O])}}}}else{if(g.isPlainObject(V.columns[L].ctrlOptions)){for(var O in V.columns[L].ctrlOptions){N.options[N.options.length]=new Option(V.columns[L].ctrlOptions[O],O)}}else{if(typeof(V.columns[L].ctrlOptions)=="string"){var T=V.columns[L].ctrlOptions.split(";");for(var O=0;O<T.length;O++){var W=T[O].indexOf(":");if(-1==W){N.options[N.options.length]=new Option(T[O],T[O])}else{N.options[N.options.length]=new Option(T[O].substring(W+1,T[O].length),T[O].substring(0,W))}}}}}tbCell.appendChild(N)}else{if(V.columns[L].type=="checkbox"){N=document.createElement("input");N.type="checkbox";N.id=V.idPrefix+"_"+V.columns[L].name+"_"+E;N.name=N.id;N.value=1;tbCell.appendChild(N);tbCell.style.textAlign="center"}else{if(V.columns[L].type=="textarea"){N=document.createElement("textarea");N.id=V.idPrefix+"_"+V.columns[L].name+"_"+E;N.name=N.id;tbCell.appendChild(N)}else{if(-1!=V.columns[L].type.search(/^(color|date|datetime|datetime\-local|email|month|number|range|search|tel|time|url|week)$/)){N=document.createElement("input");try{N.type=V.columns[L].type}catch(G){}N.id=V.idPrefix+"_"+V.columns[L].name+"_"+E;N.name=N.id;tbCell.appendChild(N)}else{N=document.createElement("input");N.type="text";N.id=V.idPrefix+"_"+V.columns[L].name+"_"+E;N.name=N.id;tbCell.appendChild(N);if(V.columns[L].type=="ui-datepicker"){g(N).datepicker(V.columns[L].uiOption)}else{if(V.columns[L].type=="ui-spinner"){g(N).spinner(V.columns[L].uiOption)}else{if(V.columns[L].type=="ui-autocomplete"){g(N).autocomplete(V.columns[L].uiOption)}}}}}}}}if(V.columns[L].type!="custom"){if(V.columns[L].ctrlAttr!=null){g(N).attr(V.columns[L].ctrlAttr)}if(V.columns[L].ctrlProp!=null){g(N).prop(V.columns[L].ctrlProp)}if(V.columns[L].ctrlCss!=null){g(N).css(V.columns[L].ctrlCss)}if(V.columns[L].ctrlClass!=null){g(N).addClass(V.columns[L].ctrlClass)}if(V.columns[L].uiTooltip){g(N).tooltip(V.columns[L].uiTooltip)}if(typeof(V.columns[L].onClick)=="function"){g(N).click({caller:Q,callback:V.columns[L].onClick,uniqueIndex:E},function(X){X.data.callback(X,g(X.data.caller).appendGrid("getRowIndex",X.data.uniqueIndex))})}if(typeof(V.columns[L].onChange)=="function"){g(N).change({caller:Q,callback:V.columns[L].onChange,uniqueIndex:E},function(X){X.data.callback(X,g(X.data.caller).appendGrid("getRowIndex",X.data.uniqueIndex))})}}if(B){o(V,L,E,I[J][V.columns[L].name])}else{if(!n(V.columns[L].value)){o(V,L,E,V.columns[L].value)}}}if(!V._hideLastColumn||V.columns.length>V._visibleCount){if(!V.rowButtonsInFront){tbCell=tbRow.insertCell(-1)}else{if(!V.hideRowNumColumn){tbCell=tbRow.insertCell(1)}else{tbCell=tbRow.insertCell(0)}}tbCell.className="ui-widget-content last";if(V._hideLastColumn){tbCell.style.display="none"}if(!V.hideButtons.insert){m(V.customGridButtons.insert,"ui-icon-arrowreturnthick-1-w").attr({id:V.idPrefix+"_Insert_"+E,title:V._i18n.insert,tabindex:-1}).addClass("insert",V._buttonClasses.insert).data("appendGrid",{uniqueIndex:E}).click(function(Y){var X=g(this).data("appendGrid").uniqueIndex;g(Q).appendGrid("insertRow",1,null,X);if(Y&&Y.preventDefault){Y.preventDefault()}return false}).appendTo(tbCell)}if(!V.hideButtons.remove){m(V.customGridButtons.remove,"ui-icon-trash").attr({id:V.idPrefix+"_Delete_"+E,title:V._i18n.remove,tabindex:-1}).addClass("remove",V._buttonClasses.remove).data("appendGrid",{uniqueIndex:E}).click(function(Y){var X=g(this).data("appendGrid").uniqueIndex;j(Q,null,X,false);if(Y&&Y.preventDefault){Y.preventDefault()}return false}).appendTo(tbCell)}if(!V.hideButtons.moveUp){m(V.customGridButtons.moveUp,"ui-icon-arrowthick-1-n").attr({id:V.idPrefix+"_MoveUp_"+E,title:V._i18n.moveUp,tabindex:-1}).addClass("moveUp",V._buttonClasses.moveUp).data("appendGrid",{uniqueIndex:E}).click(function(Y){var X=g(this).data("appendGrid").uniqueIndex;g(Q).appendGrid("moveUpRow",null,X);if(Y&&Y.preventDefault){Y.preventDefault()}return false}).appendTo(tbCell)}if(!V.hideButtons.moveDown){m(V.customGridButtons.moveDown,"ui-icon-arrowthick-1-s").attr({id:V.idPrefix+"_MoveDown_"+E,title:V._i18n.moveDown,tabindex:-1}).addClass("moveDown",V._buttonClasses.moveDown).data("appendGrid",{uniqueIndex:E}).click(function(Y){var X=g(this).data("appendGrid").uniqueIndex;g(Q).appendGrid("moveDownRow",null,X);if(Y&&Y.preventDefault){Y.preventDefault()}return false}).appendTo(tbCell)}if(V.rowDragging){g("<div/>").addClass("rowDrag ui-state-default ui-corner-all",V._buttonClasses.rowDrag).attr("title",V._i18n.rowDrag).append(g("<div/>").addClass("ui-icon ui-icon-carat-2-n-s").append(g("<span/>").addClass("ui-button-text").text("Drag"))).appendTo(tbCell)}for(var L=0;L<S.length;L++){N=document.createElement("input");N.id=V.idPrefix+"_"+V.columns[S[L]].name+"_"+E;N.name=N.id;N.type="hidden";if(B){N.value=I[J][V.columns[S[L]].name]}else{if(!n(V.columns[S[L]].value)){N.value=V.columns[S[L]].value}}tbCell.appendChild(N)}if(V.customRowButtons&&V.customRowButtons.length){for(var L=V.customRowButtons.length-1;L>=0;L--){var R=V.customRowButtons[L];if(R&&R.uiButton&&R.click&&R.atTheFront){g(tbCell).prepend(x(Q,R,E))}}for(var L=0;L<V.customRowButtons.length;L++){var R=V.customRowButtons[L];if(R&&R.uiButton&&R.click&&!R.atTheFront){g(tbCell).append(x(Q,R,E))}}}}}b(Q,V);if(g.isNumeric(P)){if(typeof(V.afterRowInserted)=="function"){V.afterRowInserted(Q,D,U)}}else{if(typeof(V.afterRowAppended)=="function"){V.afterRowAppended(Q,D,U)}}return{addedRows:U,parentIndex:D,rowIndex:P}}function q(B,D){var C=g("<button/>").attr({type:"button",tabindex:-1}).button(D.uiButton).click({tbWhole:B},D.click);if(D.btnClass){C.addClass(D.btnClass)}if(D.btnCss){C.css(D.btnCss)}if(D.btnAttr){C.attr(D.btnAttr)}return C}function x(C,E,B){var D=g("<button/>").val(B).attr({type:"button",tabindex:-1}).button(E.uiButton).click({tbWhole:C,uniqueIndex:B},function(F){var G=g(F.data.tbWhole).appendGrid("getRowValue",null,F.data.uniqueIndex);E.click(F,F.data.uniqueIndex,G)});if(E.btnClass){D.addClass(E.btnClass)}if(E.btnCss){D.css(E.btnCss)}if(E.btnAttr){D.attr(E.btnAttr)}return D}function j(C,I,B,F){var D=g(C).data("appendGrid");var H=C.getElementsByTagName("tbody")[0];if(g.isNumeric(B)){for(var G=0;G<D._rowOrder.length;G++){if(D._rowOrder[G]==B){I=G;break}}}if(g.isNumeric(I)){if(F||typeof(D.beforeRowRemove)!="function"||D.beforeRowRemove(C,I)){D._rowOrder.splice(I,1);H.deleteRow(I);b(C,D);t(C,I);if(typeof(D.afterRowRemoved)=="function"){D.afterRowRemoved(C,I)}}}else{if(F||typeof(D.beforeRowRemove)!="function"||D.beforeRowRemove(C,D._rowOrder.length-1)){B=D._rowOrder.pop();H.deleteRow(-1);b(C,D);if(typeof(D.afterRowRemoved)=="function"){D.afterRowRemoved(C,null)}}}if(D._rowOrder.length==0){var E=g("<td></td>").text(D._i18n.rowEmpty).attr("colspan",D._finalColSpan);g("tbody",C).append(g("<tr></tr>").addClass("empty").append(E))}}function y(B){var C=g(B).data("appendGrid");g("tbody",B).empty();C._rowOrder.length=0;C._uniqueIndex=0;b(B,C);if(C._rowOrder.length==0){var D=g("<td></td>").text(C._i18n.rowEmpty).attr("colspan",C._finalColSpan);g("tbody",B).append(g("<tr></tr>").addClass("empty").append(D))}}function t(B,E){var C=g(B).data("appendGrid");if(!C.hideRowNumColumn){for(var D=E;D<C._rowOrder.length;D++){g("#"+C.idPrefix+"_Row_"+C._rowOrder[D]+" td.first",B).text(D+1)}}}function a(H,D,G){var L,F,C,I,K;var E=g(H).data("appendGrid");if(E){L=H.getElementsByTagName("tbody")[0];g(L).empty();E._rowOrder.length=0;E._uniqueIndex=0;if(D!=null&&D.length){K=d(H,D.length,null,null);for(var B=0;B<K.addedRows.length;B++){for(var J=0;J<E.columns.length;J++){o(E,J,E._rowOrder[B],D[B][E.columns[J].name])}}}E._isDataLoaded=true;if(G){E.initData=null}g(H).data("appendGrid",E);if(typeof(E.dataLoaded)=="function"){E.dataLoaded(H)}}}function h(B,C){for(var D=0;D<C._rowOrder.length;D++){if(C._rowOrder[D]==B){return D}}return null}function n(B){return typeof(B)=="undefined"||B==null}function A(C,B){if(!n(C)&&g.isPlainObject(C)&&!n(C[B])){return C[B]}return null}function b(B,C){g(B).data("appendGrid",C);g("#"+C.idPrefix+"_rowOrder",B).val(C._rowOrder.join())}function z(C,B){var E=null;for(var D=0;D<C._rowOrder.length;D++){if(C._rowOrder[D]==B){return D}}return E}function i(E,C,G){var B={},D=null;for(var F=0;F<E.columns.length;F++){D=E.columns[F].name+(n(G)?"":"_"+G);B[D]=c(E,F,C)}return B}function c(F,D,B){var G=null,E=F.columns[D].type,C=F.columns[D].name;if(E=="checkbox"){G=v(E,F.idPrefix,C,B);if(G==null){return null}else{return G.checked?1:0}}else{if(E=="custom"){if(typeof(F.columns[D].customGetter)=="function"){return F.columns[D].customGetter(F.idPrefix,C,B)}else{return null}}else{G=v(E,F.idPrefix,C,B);if(G==null){return null}else{return G.value}}}}function v(D,E,C,B){return document.getElementById(E+"_"+C+"_"+B)}function o(F,D,B,G){var E=F.columns[D].type;var C=F.columns[D].name;if(E=="checkbox"){v(E,F.idPrefix,C,B).checked=(G!=null&&G!=0)}else{if(E=="custom"){if(typeof(F.columns[D].customSetter)=="function"){F.columns[D].customSetter(F.idPrefix,C,B,G)}}else{v(E,F.idPrefix,C,B).value=(G==null?"":G)}}}function p(C,H,B,D){var E=g(C).data("appendGrid");var G=-1;for(var F=0;F<E._rowOrder.length;F++){if(E._rowOrder[F]==B){if(H){G=D;E._rowOrder.splice(F,1);E._rowOrder.splice(D,0,B)}else{G=F;E._rowOrder.splice(D+1,0,B);E._rowOrder.splice(F,1)}break}}t(C,G);b(C,E)}function m(D,B){var C=null;if(D){if(typeof(D)=="function"){C=g(D())}else{if(D.nodeType){C=g(D).clone()}else{if(D.icons){C=g("<button/>").attr({type:"button"}).button(D)}}}}if(!C){C=g("<button/>").attr({type:"button"}).button({icons:{primary:B},text:false})}return C}g.fn.appendGrid=function(B){if(k[B]){return k[B].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof(B)==="object"||!B){return k.init.apply(this,arguments)}else{g.error(s.notSupportMethod+B)}}}})(jQuery);